import{_ as s,o as n,c as a,i as l}from"./app.91668ccf.js";const u=JSON.parse('{"title":"\u4E86\u89E3unplugin\u4F53\u7CFB\uFF0C\u4EE5\u53CA\u7B80\u5355\u4F7F\u7528","description":"unplugin \u662F\u4E00\u4E2A\u4E3A Vite\u3001Rollup\u3001Webpack \u7B49\u6784\u5EFA\u5DE5\u5177\u5F00\u53D1\u7684\u7EDF\u4E00\u63D2\u4EF6\u7CFB\u7EDF\uFF0Cnice\u3002","frontmatter":{"date":"2022-12-13T00:00:00.000Z","title":"\u4E86\u89E3unplugin\u4F53\u7CFB\uFF0C\u4EE5\u53CA\u7B80\u5355\u4F7F\u7528","tags":["unplugin","plugin"],"description":"unplugin \u662F\u4E00\u4E2A\u4E3A Vite\u3001Rollup\u3001Webpack \u7B49\u6784\u5EFA\u5DE5\u5177\u5F00\u53D1\u7684\u7EDF\u4E00\u63D2\u4EF6\u7CFB\u7EDF\uFF0Cnice\u3002"},"headers":[{"level":2,"title":"\u57FA\u672C\u4F7F\u7528","slug":"\u57FA\u672C\u4F7F\u7528","link":"#\u57FA\u672C\u4F7F\u7528","children":[]},{"level":2,"title":"name","slug":"name","link":"#name","children":[]},{"level":2,"title":"enforce","slug":"enforce","link":"#enforce","children":[]},{"level":2,"title":"buildStart","slug":"buildstart","link":"#buildstart","children":[]},{"level":2,"title":"resolveId","slug":"resolveid","link":"#resolveid","children":[]},{"level":2,"title":"loadInclude","slug":"loadinclude","link":"#loadinclude","children":[]},{"level":2,"title":"transformInclude","slug":"transforminclude","link":"#transforminclude","children":[]},{"level":2,"title":"transform","slug":"transform","link":"#transform","children":[]},{"level":2,"title":"buildEnd","slug":"buildend","link":"#buildend","children":[]}],"relativePath":"posts/0012.md"}'),p={name:"posts/0012.md"},e=l(`<h1 id="\u4E86\u89E3unplugin\u4F53\u7CFB-\u4EE5\u53CA\u7B80\u5355\u4F7F\u7528" tabindex="-1">\u4E86\u89E3unplugin\u4F53\u7CFB\uFF0C\u4EE5\u53CA\u7B80\u5355\u4F7F\u7528 <a class="header-anchor" href="#\u4E86\u89E3unplugin\u4F53\u7CFB-\u4EE5\u53CA\u7B80\u5355\u4F7F\u7528" aria-hidden="true">#</a></h1><p>unplugin \u662F\u4E00\u4E2A\u4E3A Vite\u3001Rollup\u3001Webpack \u7B49\u6784\u5EFA\u5DE5\u5177\u5F00\u53D1\u7684\u7EDF\u4E00\u63D2\u4EF6\u7CFB\u7EDF\uFF0Cnice\u3002\u53EF\u4EE5\u76F4\u63A5\u751F\u6210\u9488\u5BF9\u591A\u4E2A\u5E73\u53F0\u7684\u63D2\u4EF6\u7CFB\u7EDF\uFF0C\u53EF\u8C13\u662F\u4E00\u52B3\u6C38\u9038\u3002</p><h2 id="\u57FA\u672C\u4F7F\u7528" tabindex="-1">\u57FA\u672C\u4F7F\u7528 <a class="header-anchor" href="#\u57FA\u672C\u4F7F\u7528" aria-hidden="true">#</a></h2><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">createUnplugin</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">unplugin</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> unplugin </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">createUnplugin</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">UserOptions</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    name</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">unplugin-prefixed-name</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// webpack&#39;s id filter is outside of loader logic,</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// an additional hook is needed for better perf on webpack</span></span>
<span class="line"><span style="color:#F07178;">    transformInclude </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">id</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">id</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">endsWith</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">.vue</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// just like rollup transform</span></span>
<span class="line"><span style="color:#F07178;">    transform </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">code</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">code</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">replace</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">/</span><span style="color:#C3E88D;">&lt;template&gt;</span><span style="color:#89DDFF;">/</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">&lt;template&gt;&lt;div&gt;Injected&lt;/div&gt;</span><span style="color:#89DDFF;">\`</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// more hooks coming</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> vitePlugin </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> unplugin</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">vite</span></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> rollupPlugin </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> unplugin</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">rollup</span></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> webpackPlugin </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> unplugin</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">webpack</span></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> esbuildPlugin </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> unplugin</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">esbuild</span></span>
<span class="line"></span></code></pre></div><p>\u539F\u6587\uFF1Aunplugin extends the excellent Rollup plugin API as the unified plugin interface and provides a compatible layer base on the build tools used with.</p><p>\u7FFB\u8BD1\uFF1Aunplugin\u6269\u5C55\u4E86\u51FA\u8272\u7684Rollup\u63D2\u4EF6API\u4F5C\u4E3A\u7EDF\u4E00\u7684\u63D2\u4EF6\u63A5\u53E3\uFF0C\u5E76\u63D0\u4F9B\u4E86\u4E00\u4E2A\u517C\u5BB9\u7684\u6784\u5EFA\u5DE5\u5177\u5C42\u3002</p><p>\u6240\u4EE5\u8BF4\u662F\u5728Rollup\u63D2\u4EF6API\u57FA\u7840\u4E0A\u8FDB\u884C\u7684\u517C\u5BB9\uFF0C\u6240\u4EE5\u5982\u679C\u4E86\u89E3Rollup\u63D2\u4EF6\u7684\u8BDD\u5BF9\u4E8Eunplugin\u66F4\u52A0\u5F97\u5FC3\u5E94\u624B\u3002</p><p>\u53EF\u4EE5\u5148\u6765\u770B\u770B Rollup \u5B98\u65B9\u6587\u6863\u4E0A\u7684\u6D41\u7A0B\u56FE\uFF0C\u52A0\u6DF1\u5370\u8C61\u3002</p><img src="https://rollupjs.org/graphs/build-hooks.svg"><h2 id="name" tabindex="-1">name <a class="header-anchor" href="#name" aria-hidden="true">#</a></h2><p>\u63D2\u4EF6\u540D\u79F0\uFF0C\u4E0D\u8FC7\u4F7F\u7528 unplugin \u5F00\u53D1\u7684\u63D2\u4EF6\uFF0C\u5EFA\u8BAE\u6DFB\u52A0unplugin-\u524D\u7F00\uFF0C\u4EE5\u53CApackage.json\u6DFB\u52A0unplugin\u5173\u952E\u8BCD\u3002</p><h2 id="enforce" tabindex="-1">enforce <a class="header-anchor" href="#enforce" aria-hidden="true">#</a></h2><p>\u63D2\u4EF6\u6267\u884C\u987A\u5E8F</p><p>&quot;pre&quot; | &quot;post&quot; | null</p><h2 id="buildstart" tabindex="-1">buildStart <a class="header-anchor" href="#buildstart" aria-hidden="true">#</a></h2><p>\u6784\u5EFA\u5F00\u59CB</p><h2 id="resolveid" tabindex="-1">resolveId <a class="header-anchor" href="#resolveid" aria-hidden="true">#</a></h2><h2 id="loadinclude" tabindex="-1">loadInclude <a class="header-anchor" href="#loadinclude" aria-hidden="true">#</a></h2><h2 id="transforminclude" tabindex="-1">transformInclude <a class="header-anchor" href="#transforminclude" aria-hidden="true">#</a></h2><h2 id="transform" tabindex="-1">transform <a class="header-anchor" href="#transform" aria-hidden="true">#</a></h2><p>\u8F6C\u6362</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">/**</span></span>
<span class="line"><span style="color:#676E95;"> * code \u4EE3\u7801\u5185\u5BB9</span></span>
<span class="line"><span style="color:#676E95;"> * id \u6587\u4EF6\u5730\u5740</span></span>
<span class="line"><span style="color:#676E95;"> */</span></span>
<span class="line"><span style="color:#82AAFF;">transform</span><span style="color:#A6ACCD;"> (code</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">id) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">code</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">replace</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">/</span><span style="color:#C3E88D;">&lt;template&gt;</span><span style="color:#89DDFF;">/</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">&lt;template&gt;&lt;div&gt;Injected&lt;/div&gt;</span><span style="color:#89DDFF;">\`</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><h2 id="buildend" tabindex="-1">buildEnd <a class="header-anchor" href="#buildend" aria-hidden="true">#</a></h2><p>\u6784\u5EFA\u7ED3\u675F</p>`,24),o=[e];function t(r,c,i,D,F,y){return n(),a("div",null,o)}const A=s(p,[["render",t]]);export{u as __pageData,A as default};
